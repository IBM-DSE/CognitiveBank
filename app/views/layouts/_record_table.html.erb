<% columns = records.klass.columns.map {|col| col.name} %>
<% columns = columns - blacklist if defined? blacklist %>
<table class="table table-bordered table-striped">
  <tr>
    <% columns.each do |col| %>
      <th><%= records.klass.human_attribute_name col %></th>
    <% end %>
    <% helpers.each do |helper| %>
      <th><%= records.klass.human_attribute_name helper %></th>
    <% end %>
    <th>Actions</th>
  </tr>
  <% records.each do |rec| %>
    <tr>
      <% columns.each do |col| %>
        <td><%= rec[col] %></td>
      <% end %>
      <% helpers.each do |helper| %>
          <%= method(helper).call(rec) %>
      <% end %>
      <td>
        <% actions.each do |action| %>
          <p>
          <% if action == 'destroy' %>
            <%= button_to action, { action: action, controller: rec.class.to_s.tableize, id: rec.id },
                                    method: action.to_sym, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
          <% else %>
            <%= link_to action, [action.to_sym, rec], class: 'btn btn-warning' %>
          <% end %>
          </p>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>
